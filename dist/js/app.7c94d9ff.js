(function(t){function e(e){for(var o,a,s=e[0],u=e[1],l=e[2],c=0,p=[];c<s.length;c++)a=s[c],r[a]&&p.push(r[a][0]),r[a]=0;for(o in u)Object.prototype.hasOwnProperty.call(u,o)&&(t[o]=u[o]);d&&d(e);while(p.length)p.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],o=!0,a=1;a<n.length;a++){var u=n[a];0!==r[u]&&(o=!1)}o&&(i.splice(e--,1),t=s(s.s=n[0]))}return t}var o={},r={app:0},i=[];function a(t){return s.p+"js/"+({about:"about"}[t]||t)+"."+{about:"48e16e81"}[t]+".js"}function s(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(t){var e=[],n=r[t];if(0!==n)if(n)e.push(n[2]);else{var o=new Promise(function(e,o){n=r[t]=[e,o]});e.push(n[2]=o);var i,u=document.createElement("script");u.charset="utf-8",u.timeout=120,s.nc&&u.setAttribute("nonce",s.nc),u.src=a(t),i=function(e){u.onerror=u.onload=null,clearTimeout(l);var n=r[t];if(0!==n){if(n){var o=e&&("load"===e.type?"missing":e.type),i=e&&e.target&&e.target.src,a=new Error("Loading chunk "+t+" failed.\n("+o+": "+i+")");a.type=o,a.request=i,n[1](a)}r[t]=void 0}};var l=setTimeout(function(){i({type:"timeout",target:u})},12e4);u.onerror=u.onload=i,document.head.appendChild(u)}return Promise.all(e)},s.m=t,s.c=o,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)s.d(n,o,function(e){return t[e]}.bind(null,o));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/",s.oe=function(t){throw console.error(t),t};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=e,u=u.slice();for(var c=0;c<u.length;c++)e(u[c]);var d=l;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("cd49")},"05e4":function(t,e,n){},"07bb":function(t,e,n){},"5c0b":function(t,e,n){"use strict";var o=n("5e27"),r=n.n(o);r.a},"5e27":function(t,e,n){},b0a0:function(t,e,n){"use strict";var o=n("07bb"),r=n.n(o);r.a},cd49:function(t,e,n){"use strict";n.r(e);var o=n("2b0e"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container",attrs:{id:"app"}},[n("div",{attrs:{id:"nav"}},[n("router-link",{attrs:{to:"/"}},[t._v("Home")]),t._v(" |\n     "),n("router-link",{attrs:{to:"/about"}},[t._v("About")])],1),n("router-view")],1)},i=[],a=(n("5c0b"),n("b0a0"),n("2877")),s={},u=Object(a["a"])(s,r,i,!1,null,null,null),l=u.exports,c=n("8c4f"),d=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home columns is-mobile is-centered"},[n("div",{staticClass:"column is-half"},[n("Tagnet"),n("Wall")],1)])},p=[],m=n("9ab4"),f=n("60a3"),h=n("4bb5"),b=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"autocomplete"},[n("b-field",{attrs:{label:t.output}},[n("b-autocomplete",{attrs:{rounded:"",data:t.filterData,"clear-on-select":"",icon:"search",placeholder:"e.g. Anne"},on:{input:t.keymapper,select:function(e){return t.selected=e}},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.keyEvent(t.label)}},model:{value:t.label,callback:function(e){t.label=e},expression:"label"}},[n("template",{slot:"empty"},[t._v("No results found")])],2)],1)],1)},A=[],g=n("23ee"),v=n("478e"),y="http://localhost:3000";function w(t){return"TAGNET-"+t}var _,j,O=n("71f3"),C=localStorage.getItem(w("user"))||"",I=Object({NODE_ENV:"production",BASE_URL:"/"}).GRAPH_QL_API||"https://hasura-velaru.herokuapp.com/v1alpha1/graphql",k={Authorization:"Bearer "+C},E=(Object(v["b"])({uri:I,headers:k}),new g["a"]({cache:new O["a"],uri:I,headers:k})),L=n("9530"),S=n.n(L),M=S()(_||(_=m["f"](["\nquery {\n    tags {\n        id,\n        label\n        code\n        created\n    }\n}\n"],["\nquery {\n    tags {\n        id,\n        label\n        code\n        created\n    }\n}\n"])));(function(t){t["Goal"]="trophy",t["Person"]="user-alt",t["Event"]="calendar-alt",t["Topic"]="newspaper",t["Idea"]="lightbulb",t["Any"]="asterisk"})(j||(j={}));var x={tags:[]},T={tags:function(t,e,n){return x.tags}},Q={addTag:function(t,e){var n=Object.assign({},e);t.tags.push(n)}},P={loadTags:function(t,e){t.commit,t.dispatch,t.rootState;return m["b"](this,void 0,void 0,function(){var t;return m["e"](this,function(e){switch(e.label){case 0:return[4,E.query({query:M})];case 1:return t=e.sent(),x.tags=t.data.tags,[2]}})})}},q={state:x,getters:T,actions:P,mutations:Q,namespaced:!0},B=(n("c437"),function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.data=[],e.label="",e.selected=null,e.actionType=null,e.output="Start Typing",e.icon="search",e}return m["d"](e,t),e.prototype.watchSelected=function(t,e){if(t){var n=this.matchKind(t);this.actionType=n[0],this.output=this.actionType.label}},e.prototype.matchKind=function(t){var e=this.tags.filter(function(e){return e.label===t}),n=this.memos.filter(function(e){return e.label===t}),o=n.length>0;return this.swapIcon(t,o),o?n:e},e.prototype.swapIcon=function(t,e){var n="fa-"+this.icon,o=document.getElementsByClassName(n)[0],r=e?"clipboard":j[t],i=o.classList.value.replace(this.icon,r);o.className=i,this.icon=r},e.prototype.newMemo=function(t){return{uuid:"",id:"",created:"",user_id:"",label:t,tag_id:this.actionType.id}},e.prototype.newLine=function(t){return{uuid:"",created:"",user_id:"",memo_id:this.actionType.id,label:t}},e.prototype.keyEvent=function(t){if(!this.actionType)return console.log(t,"search"),void this.searchLines(t);if(""!==t.trim())if(this.label="",-1==Object.keys(this.actionType).indexOf("code")){var e=this.newLine(t);this.createLine(e)}else{if(console.log(t,"search"),"/"===t.charAt(0))return;var n=this.newMemo(t);this.createMemo(n)}},e.prototype.keymapper=function(t){null!==t&&(1===t.length&&"/"===t.charAt(0)&&(this.data=this.tags.map(function(t){return t.label})),1===t.length&&"@"===t.charAt(0)&&(this.data=this.memos.map(function(t){return t.label})),this.actionType||this.searchLines(t))},Object.defineProperty(e.prototype,"filterData",{get:function(){var t=this.label.length,e=this.label.substring(1,t).toLowerCase();return this.data.filter(function(t){return t.toString().toLowerCase().indexOf(e)>=0})},enumerable:!0,configurable:!0}),m["c"]([Object(h["b"])("tags/tags")],e.prototype,"tags",void 0),m["c"]([Object(h["b"])("memos/memos")],e.prototype,"memos",void 0),m["c"]([Object(h["c"])("memos/addMemo")],e.prototype,"addMemo",void 0),m["c"]([Object(h["b"])("lines/lines")],e.prototype,"lines",void 0),m["c"]([Object(h["c"])("lines/addLine")],e.prototype,"addLine",void 0),m["c"]([Object(h["a"])("memos/createMemo")],e.prototype,"createMemo",void 0),m["c"]([Object(h["a"])("lines/createLine")],e.prototype,"createLine",void 0),m["c"]([Object(h["a"])("lines/searchLines")],e.prototype,"searchLines",void 0),m["c"]([Object(f["c"])("selected")],e.prototype,"watchSelected",null),e=m["c"]([f["a"]],e),e}(f["b"])),D=B,G=D,J=Object(a["a"])(G,b,A,!1,null,null,null),K=J.exports,N=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wall"},t._l(t.sortedLines,function(e,o,r){return n("div",{staticClass:"card"},[n("h2",[n("strong",[n("b-icon",{attrs:{icon:t.icon(e[0].type),size:"is-small"}}),t._v("\n                      "+t._s(o)+"\n                  ")],1)]),n("ul",t._l(e,function(e){return n("li",[t._v("\n                      "+t._s(e.label)+"\n                  ")])}),0)])}),0)},$=[],U=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return m["d"](e,t),e.prototype.icon=function(t){return j[t]},e.prototype.created=function(){this.loadLines()},m["c"]([Object(h["b"])("tags/tags")],e.prototype,"tags",void 0),m["c"]([Object(h["b"])("memos/memos")],e.prototype,"memos",void 0),m["c"]([Object(h["b"])("lines/sortedLines")],e.prototype,"sortedLines",void 0),m["c"]([Object(h["a"])("lines/loadLines")],e.prototype,"loadLines",void 0),e=m["c"]([f["a"]],e),e}(f["b"]),H=U,Y=H,R=(n("fb6e"),Object(a["a"])(Y,N,$,!1,null,"7043174d",null)),F=R.exports,W=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return m["d"](e,t),e.prototype.created=function(){this.loadTags(),this.loadMemos()},m["c"]([Object(h["a"])("tags/loadTags")],e.prototype,"loadTags",void 0),m["c"]([Object(h["a"])("memos/loadMemos")],e.prototype,"loadMemos",void 0),e=m["c"]([Object(f["a"])({components:{Tagnet:K,Wall:F}})],e),e}(f["b"]),z=W,V=z,Z=Object(a["a"])(V,d,p,!1,null,null,null),X=Z.exports,tt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._m(0),n("h2",[t._v("Login")]),n("form",{on:{submit:t.handleSubmit}},[n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"username"}},[t._v("Username")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],staticClass:"form-control",class:{"is-invalid":t.submitted&&!t.username},attrs:{type:"text",name:"username"},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}}),n("div",{directives:[{name:"show",rawName:"v-show",value:t.submitted&&!t.username,expression:"submitted && !username"}],staticClass:"invalid-feedback"},[t._v("Username is required")])]),n("div",{staticClass:"form-group"},[n("label",{attrs:{htmlFor:"password"}},[t._v("Password")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",class:{"is-invalid":t.submitted&&!t.password},attrs:{type:"password",name:"password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),n("div",{directives:[{name:"show",rawName:"v-show",value:t.submitted&&!t.password,expression:"submitted && !password"}],staticClass:"invalid-feedback"},[t._v("Password is required")])]),n("div",{staticClass:"form-group"},[n("a",{attrs:{href:t.oAuth}},[t._v(" login here")]),n("button",{staticClass:"btn btn-primary",attrs:{disabled:t.loggingIn}},[t._v("Login")]),n("img",{directives:[{name:"show",rawName:"v-show",value:t.loggingIn,expression:"loggingIn"}],attrs:{src:"data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA=="}})])])])},et=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"alert alert-info"},[t._v("\n\t\t\tUsername: test"),n("br"),t._v("\n\t\t\tPassword: test\n\t\t")])}],nt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.username="",e.password="",e.submitted=!1,e.oAuth="https://tagnet.auth0.com/login?client=2rUl0BvJ91rrfBI7t0tXcFC6yxx0HF3K&protocol=oauth2&response_type=token id_token&redirect_uri=http://localhost:8080/callback&scope=openid profile",e}return m["d"](e,t),Object.defineProperty(e.prototype,"loggingIn",{get:function(){return this.logginInStatus},enumerable:!0,configurable:!0}),e.prototype.created=function(){},e.prototype.handleSubmit=function(t){t.preventDefault(),this.submitted=!0;var e=this,n=e.username,o=e.password,r=this.$store.dispatch;n&&o&&r("user/login",{username:n,password:o})},m["c"]([Object(h["b"])("user/status")],e.prototype,"logginInStatus",void 0),e=m["c"]([Object(f["a"])({components:{}})],e),e}(f["b"]),ot=nt,rt=ot,it=Object(a["a"])(rt,tt,et,!1,null,null,null),at=it.exports;o["default"].use(c["a"]);var st,ut,lt,ct,dt,pt=new c["a"]({mode:"history",base:"/",routes:[{path:"/",name:"home",component:X},{path:"/login",name:"login",component:at},{path:"/Logout",name:"logout",component:at},{path:"/callback",name:"callback",component:function(){return n.e("about").then(n.bind(null,"f820"))}},{path:"/about",name:"about",component:function(){return n.e("about").then(n.bind(null,"f820"))}}]}),mt=n("2f62"),ft=S()(st||(st=m["f"](["\nmutation insert_memo($objects: [memos_insert_input!]!) {\n  insert_memos(objects: $objects) {\n    returning {\n      id\n      label\n      uuid\n      tag_id\n    }\n  }\n}"],["\nmutation insert_memo($objects: [memos_insert_input!]!) {\n  insert_memos(objects: $objects) {\n    returning {\n      id\n      label\n      uuid\n      tag_id\n    }\n  }\n}"]))),ht=S()(ut||(ut=m["f"](["\nquery {\n    memos {\n        id,\n        label,\n        uuid,\n        tag_id\n    }\n}\n"],["\nquery {\n    memos {\n        id,\n        label,\n        uuid,\n        tag_id\n    }\n}\n"]))),bt=(n("c437"),{memos:[]}),At={addMemo:function(t,e){var n=Object.assign({},e);t.memos.push(n)}},gt={createMemo:function(t,e){var n=t.commit;t.dispatch,t.rootState;return m["b"](this,void 0,void 0,function(){var t,o;return m["e"](this,function(r){switch(r.label){case 0:return[4,E.mutate({mutation:ft,variables:{objects:[{label:e.label,tag_id:e.tag_id}]}})];case 1:return t=r.sent(),o=t.data.insert_memos.returning.pop(),n("addMemo",o),[2]}})})},loadMemos:function(t){t.commit,t.dispatch,t.rootState;return m["b"](this,void 0,void 0,function(){var t;return m["e"](this,function(e){switch(e.label){case 0:return[4,E.query({query:ht})];case 1:return t=e.sent(),bt.memos=t.data.memos,[2]}})})}},vt={memos:function(t,e,n){return t.memos},find:function(t,e,n,o){return t.memos.filter(function(t){return t.id===o})}},yt={state:bt,getters:vt,mutations:At,actions:gt,namespaced:!0},wt=S()(lt||(lt=m["f"](["\nmutation insertLine($objects: [lines_insert_input!]!) {\n  insert_lines(objects: $objects) {\n    returning {\n      id\n      memo_id\n      label\n      uuid\n      user_id\n    }\n  }\n}"],["\nmutation insertLine($objects: [lines_insert_input!]!) {\n  insert_lines(objects: $objects) {\n    returning {\n      id\n      memo_id\n      label\n      uuid\n      user_id\n    }\n  }\n}"]))),_t=S()(ct||(ct=m["f"](["\nquery {\n    lines {\n      id,\n      uuid,\n      memo_id,\n      label,\n      created\n    }\n}\n"],["\nquery {\n    lines {\n      id,\n      uuid,\n      memo_id,\n      label,\n      created\n    }\n}\n"]))),jt=S()(dt||(dt=m["f"](["\nquery search_lines($input: String) {\n\tlines(\n\t\twhere: {label: {_like: $input }}\n\t) {\n      id,\n      uuid,\n      memo_id,\n      label\n\t}\n}\n"],["\nquery search_lines($input: String) {\n\tlines(\n\t\twhere: {label: {_like: $input }}\n\t) {\n      id,\n      uuid,\n      memo_id,\n      label\n\t}\n}\n"]))),Ot=(n("c437"),{lines:[],wall:[]}),Ct={addLine:function(t,e){var n=Object.assign({},e);t.lines.push(n)}},It={createLine:function(t,e){var n=t.commit;t.dispatch,t.rootState;return m["b"](this,void 0,void 0,function(){var t,o;return m["e"](this,function(r){switch(r.label){case 0:return console.log("LINE",e),[4,E.mutate({mutation:wt,variables:{objects:[{label:e.label,memo_id:e.memo_id}]}})];case 1:return t=r.sent(),o=t.data.insert_lines.returning.pop(),n("addLine",o),[2]}})})},loadLines:function(t){t.commit,t.dispatch,t.rootState;return m["b"](this,void 0,void 0,function(){var t;return m["e"](this,function(e){switch(e.label){case 0:return[4,E.query({query:_t})];case 1:return t=e.sent(),Ot.lines=t.data.lines,Ot.wall=t.data.lines,[2]}})})},searchLines:function(t,e){t.commit;var n=t.dispatch;t.rootState;return m["b"](this,void 0,void 0,function(){var t,o;return m["e"](this,function(r){switch(r.label){case 0:return t="%"+e+"%",[4,E.query({query:jt,variables:{input:t}})];case 1:return o=r.sent(),n("sortedLines"),Ot.lines=o.data.lines,[2]}})})}},kt={lines:function(t,e,n){return t.lines},sortedLines:function(t,e,n){return t.lines.sort(function(t,e){return t.logged-e.logged}).reduce(function(t,e){var o=n.memos.memos.filter(function(t){return t.id===e.memo_id})[0],r=n.tags.tags.filter(function(t){return t.id===o.tag_id})[0],i=o.label;t[i]||(t[i]=[]);var a=Object.assign({},e,{type:r.label});return t[i].push(a),t},{})}},Et={state:Ot,getters:kt,mutations:Ct,actions:It,namespaced:!0},Lt=localStorage.getItem(w("user"))||"",St=Lt||null,Mt=St?{status:{loggedIn:!0},user:St}:{status:{},user:null},xt={status:function(t,e,n){return Mt.status.loggingIn}},Tt={setUser:function(t,e){localStorage.setItem(w("user"),JSON.stringify(e))},logout:function(t,e){localStorage.removeItem(w("user"))},loginFailure:function(t,e){t.status={},t.user=null},loginSuccess:function(t,e){t.status={loggedIn:!0},t.user=e},loginRequest:function(t,e){t.status={loggingIn:!0},t.user=e}},Qt={login:function(t,e){var n=t.commit;t.dispatch,t.rootState;return m["b"](this,void 0,void 0,function(){var t,o;return m["e"](this,function(r){return e.username,e.password,t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)},o=y+"/users/authenticate",fetch(o,t).then(qt).then(function(t){var e=t;n("loginSuccess",e),n("setUser",e),pt.push("/")}).catch(function(t){console.log(t),n("loginFailure"),n("logout")}),[2]})})},logout:function(t){var e=t.commit;e("logout")}},Pt={state:Mt,getters:xt,actions:Qt,mutations:Tt,namespaced:!0};function qt(t){return t.text().then(function(e){var n=e&&JSON.parse(e);if(!t.ok){401===t.status&&location.reload(!0);var o=n&&n.message||t.statusText;return Promise.reject(o)}return n})}o["default"].use(mt["a"]);var Bt=new mt["a"].Store({mutations:{},actions:{},modules:{tags:q,memos:yt,lines:Et,user:Pt}}),Dt=n("8a03"),Gt=n.n(Dt);n("5abe");o["default"].config.productionTip=!1,o["default"].use(Gt.a,{defaultIconPack:"fas"}),pt.beforeEach(function(t,e,n){var o=["/login","/about"],r=!o.includes(t.path);if("/callback"===t.path){var i=t.hash.split("&").pop().split("=").pop();localStorage.setItem(w("user"),i)}var a=localStorage.getItem(w("user"));if(r&&!a)return n("/login");"/logout"===t.path&&(Bt.dispatch("user/logout"),window.location.reload()),n()}),new o["default"]({router:pt,store:Bt,render:function(t){return t(l)}}).$mount("#app")},fb6e:function(t,e,n){"use strict";var o=n("05e4"),r=n.n(o);r.a}});
//# sourceMappingURL=app.7c94d9ff.js.map